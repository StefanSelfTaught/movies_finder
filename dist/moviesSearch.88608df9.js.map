{"version":3,"sources":["js/variables.js","js/moviesSearch.js"],"names":["apiKey","searchForm","document","getElementById","inputSearch","moviesList","previous","next","pagination","spinner","variables","addEventListener","e","preventDefault","getMovies","target","value","previousDisabled","movie","page","length","innerHTML","disabled","classList","add","remove","fetch","then","resp","json","data","totalPages","nextDisabled","total_pages","console","log","output","movies","results","map","descp","overview","split","splice","join","poster_path","backdrop_path","title","release_date","vote_average","id","style","visibility","window","scrollTo"],"mappings":"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","file":"moviesSearch.88608df9.js","sourceRoot":"..","sourcesContent":["export const apiKey = 'ce2eb2231a371296cf6ff11a39206d6e';\r\nexport const searchForm = document.getElementById('searchForm');\r\nexport const inputSearch = document.getElementById('inputSearch');\r\nexport const moviesList = document.getElementById('moviesList');\r\nexport const previous = document.getElementById('previous');\r\nexport const next = document.getElementById('next');\r\nexport const pagination = document.getElementById('pagination-container');\r\nexport const spinner = `\r\n    <div class=\"mb-5 spinner-border text-light\" style=\"width: 3rem; height: 3rem;\" role=\"status\">\r\n      <span class=\"sr-only\">Loading...</span>\r\n    </div>`;","import * as variables from './variables.js';\r\n\r\n(() => {\r\n\r\n  variables.inputSearch.addEventListener('input', (e) => {\r\n    e.preventDefault();\r\n    getMovies(e.target.value, 1);\r\n  });\r\n\r\n  const previousDisabled = page => {\r\n    if(page == 1){\r\n      variables.previous.disabled = true;\r\n      variables.previous.classList.add('button-disabled');\r\n    } else {\r\n      variables.previous.disabled = false;\r\n      variables.previous.classList.remove('button-disabled');\r\n    }\r\n  }\r\n\r\n  const nextDisabled = (page, totalPages) => {\r\n    if(page === totalPages){\r\n      variables.next.disabled = true;\r\n      variables.next.classList.add('button-disabled');\r\n    } else {\r\n      variables.next.disabled = false;\r\n      variables.next.classList.remove('button-disabled');\r\n    }\r\n  }\r\n\r\n  const getMovies = (movie, page) => {\r\n    if(variables.inputSearch.value.length > 0){\r\n      variables.moviesList.innerHTML = variables.spinner;\r\n    }\r\n    previousDisabled(page);\r\n    if(movie.length > 0) {\r\n       fetch(\r\n        `https://api.themoviedb.org/3/search/movie?api_key=${variables.apiKey}&query=${movie}&page=${page}`\r\n      )\r\n        .then(resp => resp.json())\r\n        .then(data => {\r\n          nextDisabled(page, data.total_pages);\r\n          console.log(data);\r\n          let output = '';\r\n          let movies = data.results;\r\n          movies.map(movie => {\r\n            let descp;\r\n            if (movie.overview.length > 260) {\r\n              descp = movie.overview.split(\" \").splice(0, 30).join(\" \") + '...';\r\n            } else if (movie.overview == \"\") {\r\n              descp = \"No description\";\r\n            } else {\r\n              descp = movie.overview;\r\n            }\r\n            if(movie.poster_path !== null && movie.backdrop_path !== null) {\r\n            output += `\r\n              <div class=\"card\">\r\n                <div class=\"poster\">\r\n                  <img\r\n                    src=\"https://image.tmdb.org/t/p/w300${movie.poster_path}\"\r\n                  />\r\n                </div>\r\n                <div class=\"details\">\r\n                  <h2>${movie.title}<br /><span>Relased in: ${movie.release_date}</span></h2>\r\n                  <div class=\"rating\">\r\n                    <i class=\"fas fa-star\"></i>\r\n                    <span>${movie.vote_average} / 10</span>\r\n                  </div>\r\n                  <div class=\"info\">\r\n                    <p>\r\n                      ${descp}\r\n                    </p>\r\n                  </div>\r\n                  <div class=\"more-info\">\r\n                    <a href=\"https://www.themoviedb.org/movie/${movie.id}\" target=\"_blank\" class=\"btn btn-dark\">More Details</a>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            `;\r\n            }\r\n          })\r\n          if(movies.length !== 0){\r\n            variables.moviesList.innerHTML = output;\r\n          } else {\r\n            variables.moviesList.innerHTML = `<h2 class=\"no-results\">No results founded</h2>`;\r\n            variables.next.disabled = true;\r\n            variables.next.classList.add('button-disabled');\r\n          }\r\n           variables.pagination.style.visibility = 'visible';\r\n           variables.next.addEventListener('click', () => {\r\n            window.scrollTo(0, 240);\r\n            getMovies(variables.inputSearch.value, ++page);\r\n          });\r\n          previous.addEventListener('click', () => {\r\n            window.scrollTo(0, 240);\r\n            getMovies(variables.inputSearch.value, --page)\r\n          });\r\n        })\r\n    } else {\r\n      variables.moviesList.innerHTML = null;\r\n      variables.pagination.style.visibility = 'hidden';\r\n    }\r\n  }\r\n})();\r\n"]}