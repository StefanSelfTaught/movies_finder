{"version":3,"sources":["js/variables.js","js/moviesSearch.js"],"names":["apiKey","searchForm","document","getElementById","inputSearch","moviesList","previous","next","pagination","spinner","variables","addEventListener","e","preventDefault","getMovies","target","value","previousDisabled","page","disabled","classList","add","remove","nextDisabled","totalPages","movie","length","innerHTML","fetch","then","resp","json","data","total_pages","console","log","output","movies","results","map","descp","overview","split","splice","join","poster_path","backdrop_path","title","release_date","vote_average","id","style","visibility","window","scrollTo"],"mappings":"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","file":"moviesSearch.6465a4d8.js","sourceRoot":"..","sourcesContent":["export const apiKey = 'ce2eb2231a371296cf6ff11a39206d6e';\r\nexport const searchForm = document.getElementById('searchForm');\r\nexport const inputSearch = document.getElementById('inputSearch');\r\nexport const moviesList = document.getElementById('moviesList');\r\nexport const previous = document.getElementById('previous');\r\nexport const next = document.getElementById('next');\r\nexport const pagination = document.getElementById('pagination-container');\r\nexport const spinner = `\r\n    <div class=\"mb-5 spinner-border text-light\" style=\"width: 3rem; height: 3rem;\" role=\"status\">\r\n      <span class=\"sr-only\">Loading...</span>\r\n    </div>`;","import * as variables from './variables.js';\r\n\r\n(() => {\r\n\r\n  variables.inputSearch.addEventListener('input', (e) => {\r\n    e.preventDefault();\r\n    getMovies(e.target.value, 1);\r\n  });\r\n\r\n  const previousDisabled = page => {\r\n    if(page == 1){\r\n      variables.previous.disabled = true;\r\n      variables.previous.classList.add('button-disabled');\r\n    } else {\r\n      variables.previous.disabled = false;\r\n      variables.previous.classList.remove('button-disabled');\r\n    }\r\n  }\r\n\r\n  const nextDisabled = (page, totalPages) => {\r\n    if(page === totalPages){\r\n      variables.next.disabled = true;\r\n      variables.next.classList.add('button-disabled');\r\n    } else {\r\n      variables.next.disabled = false;\r\n      variables.next.classList.remove('button-disabled');\r\n    }\r\n  }\r\n\r\n  const getMovies = (movie, page) => {\r\n    if(variables.inputSearch.value.length > 0){\r\n      variables.moviesList.innerHTML = variables.spinner;\r\n    }\r\n    previousDisabled(page);\r\n    if(movie.length > 0) {\r\n       fetch(\r\n        `https://api.themoviedb.org/3/search/movie?api_key=${variables.apiKey}&query=${movie}&page=${page}`\r\n      )\r\n        .then(resp => resp.json())\r\n        .then(data => {\r\n          nextDisabled(page, data.total_pages);\r\n          console.log(data);\r\n          let output = '';\r\n          let movies = data.results;\r\n          movies.map(movie => {\r\n            let descp;\r\n            if (movie.overview.length > 260) {\r\n              descp = movie.overview.split(\" \").splice(0, 30).join(\" \") + '...';\r\n            } else if (movie.overview == \"\") {\r\n              descp = \"No description\";\r\n            } else {\r\n              descp = movie.overview;\r\n            }\r\n            if(movie.poster_path !== null && movie.backdrop_path !== null) {\r\n            output += `\r\n              <div class=\"card\">\r\n                <div class=\"poster\">\r\n                  <img\r\n                    src=\"https://image.tmdb.org/t/p/w300${movie.poster_path}\"\r\n                  />\r\n                </div>\r\n                <div class=\"details\">\r\n                  <h2>${movie.title}<br /><span>Relased in: ${movie.release_date}</span></h2>\r\n                  <div class=\"rating\">\r\n                    <i class=\"fas fa-star\"></i>\r\n                    <span>${movie.vote_average} / 10</span>\r\n                  </div>\r\n                  <div class=\"info\">\r\n                    <p>\r\n                      ${descp}\r\n                    </p>\r\n                  </div>\r\n                  <div class=\"more-info\">\r\n                    <a href=\"https://www.themoviedb.org/movie/${movie.id}\" target=\"_blank\" class=\"btn btn-dark\">More Details</a>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            `;\r\n            }\r\n          })\r\n          if(movies.length !== 0){\r\n            variables.moviesList.innerHTML = output;\r\n          } else {\r\n            variables.moviesList.innerHTML = `<h2 class=\"no-results\">No results founded</h2>`;\r\n            variables.next.disabled = true;\r\n            variables.next.classList.add('button-disabled');\r\n          }\r\n           variables.pagination.style.visibility = 'visible';\r\n           variables.next.addEventListener('click', () => {\r\n            window.scrollTo(0, 240);\r\n            getMovies(variables.inputSearch.value, ++page);\r\n          });\r\n          previous.addEventListener('click', () => {\r\n            window.scrollTo(0, 240);\r\n            getMovies(variables.inputSearch.value, --page)\r\n          });\r\n        })\r\n    } else {\r\n      variables.moviesList.innerHTML = null;\r\n      variables.pagination.style.visibility = 'hidden';\r\n    }\r\n  }\r\n})();\r\n"]}